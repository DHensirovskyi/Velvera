<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Analytics — Demo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body{
  margin:0;
  background:#f6f7fb;
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
  min-height:100svh;           /* высота окна, учитывает мобилки */
  display:grid;                /* грид для центра */
  place-items:center;          /* по центру по X и Y */
  padding:16px;                /* небольшой «воздух» на мобилках */
}
.wrap{
  max-width:860px;
  width:100%;
  margin:0;                    /* чтобы реально стало по центру */
  background:#fff;
  border-radius:16px;
  box-shadow:0 6px 24px rgba(18,18,23,.06);
  padding:24px;
}
    .kpi{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px;margin:0 0 16px}
    .box{background:#f9fafb;border-radius:12px;padding:12px}
    .muted{color:#6b7280;font-size:12px}

    /* ====== Fade-in анимация (растянута ~5s) ====== */
@keyframes fadeUp {
  from { opacity:0; transform: translateY(8px); }
  to   { opacity:1; transform: translateY(0); }
}
/* управляем длительностью/шагом одной точкой */
:root{
  --fade-dur: 1.1s;   /* длительность одного fade */
  --fade-step: .8s;   /* «ступень» задержки между блоками */
}

.fade-in{
  opacity:0;
  transform: translateY(8px);
  animation: fadeUp var(--fade-dur) cubic-bezier(.2,.7,.2,1) forwards;
  will-change: opacity, transform;
}

/* каскад задержек: суммарно выходит ≈5–5.5s */
.delay-1 { animation-delay: calc(1 * var(--fade-step)); }
.delay-2 { animation-delay: calc(2 * var(--fade-step)); }
.delay-3 { animation-delay: calc(3 * var(--fade-step)); }
.delay-4 { animation-delay: calc(4 * var(--fade-step)); }
.delay-5 { animation-delay: calc(5 * var(--fade-step)); }
.delay-6 { animation-delay: calc(6 * var(--fade-step)); }
.delay-7 { animation-delay: calc(7 * var(--fade-step)); }

/* уважение к сниженной анимации */
@media (prefers-reduced-motion: reduce) {
  .fade-in { animation: none; opacity: 1; transform: none; }
}

  </style>
</head>
<body>
  <div class="wrap">
    <h1 class="fade-in delay-1" style="margin:0 0 8px">Velvera Analytics 21.07 - 27.08</h1>
    <p class="muted fade-in delay-2">Aus Buchungen: bestätigt vs storniert pro Tag</p>

    <div class="kpi">
      <div class="box fade-in delay-3">
        <div class="muted">Bestätigt gesamt</div>
        <div id="kConfirmed" style="font-size:24px;font-weight:700">0</div>
      </div>
      <div class="box fade-in delay-4">
        <div class="muted">Storniert gesamt</div>
        <div id="kCancelled" style="font-size:24px;font-weight:700">0</div>
      </div>
      <div class="box fade-in delay-5">
        <div class="muted">Conversion</div>
        <div id="kConv" style="font-size:24px;font-weight:700">—</div>
      </div>
    </div>

    <canvas id="chart" class="fade-in delay-6" height="120"></canvas>
  </div>

<script>
(function(){
  const demoData = {
    confirmed: [9, 13, 11, 8, 9, 15, 13],
    cancelled: [2, 1, 3, 4, 2, 3, 1] 
  };

  const days = [];
  for (let i=6;i>=0;i--){
    const d = new Date(); 
    d.setDate(d.getDate()-i);
    const key = d.toISOString().slice(0,10);
    days.push({ 
      key, 
      label: d.toLocaleDateString('de-DE', { 
        weekday:'short', 
        day:'2-digit', 
        month:'2-digit' 
      }) 
    });
  }

  const confirmedSeries = demoData.confirmed;
  const cancelledSeries = demoData.cancelled;

  const sum = (arr) => arr.reduce((a,x)=>a+x,0);
  const totalConfirmed = sum(confirmedSeries);
  const totalCancelled = sum(cancelledSeries);
  
  document.getElementById('kConfirmed').textContent = String(totalConfirmed);
  document.getElementById('kCancelled').textContent = String(totalCancelled);
  document.getElementById('kConv').textContent = totalConfirmed+totalCancelled>0
    ? Math.round(100*totalConfirmed/(totalConfirmed+totalCancelled)) + '%'
    : '—';

  new Chart(document.getElementById('chart'), {
    type: 'line',
    data: {
      labels: days.map(d => d.label),
      datasets: [
        { 
          label: 'Bestätigt', 
          data: confirmedSeries, 
          borderWidth: 3, 
          tension: .4,
          borderColor: '#10b981',
          backgroundColor: 'rgba(16, 185, 129, 0.1)',
          pointBackgroundColor: '#10b981',
          pointBorderColor: '#10b981',
          pointRadius: 4,
          pointHoverRadius: 6,
          fill: true
        },
        { 
          label: 'Storniert', 
          data: cancelledSeries, 
          borderWidth: 3, 
          tension: .4,
          borderColor: '#ef4444',
          backgroundColor: 'rgba(239, 68, 68, 0.1)',
          pointBackgroundColor: '#ef4444',
          pointBorderColor: '#ef4444',
          pointRadius: 4,
          pointHoverRadius: 6,
          fill: true
        }
      ],
    },
    options: {
      responsive: true,
      plugins: { 
        legend: { 
          position: 'bottom',
          labels: {
            usePointStyle: true,
            padding: 20,
            font: { size: 13 }
          }
        } 
      },
      scales: { 
        y: { 
          beginAtZero: true, 
          ticks: { stepSize: 5 },
          grid: { color: 'rgba(0,0,0,0.05)' }
        },
        x: { grid: { display: false } }
      },
      elements: { line: { borderJoinStyle: 'round' } }
    }
  });
})();
</script>
</body>
</html>
